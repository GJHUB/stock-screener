{% extends "base.html" %}

{% block title %}å›æµ‹æŠ¥å‘Š - è‚¡ç¥¨æ—¥Kç­›é€‰å™¨{% endblock %}
{% block subtitle %}ç­–ç•¥å›æµ‹æŠ¥å‘Š{% endblock %}

{% block content %}
<div class="card">
    <h2>ğŸ“ˆ å›æµ‹æ¦‚è§ˆ</h2>
    <div class="stats-grid">
        <div class="stat-item">
            <div class="stat-value">{{ total_trades }}</div>
            <div class="stat-label">æ€»äº¤æ˜“æ¬¡æ•°</div>
        </div>
        <div class="stat-item">
            <div class="stat-value">{{ win_rate }}</div>
            <div class="stat-label">èƒœç‡</div>
        </div>
        <div class="stat-item">
            <div class="stat-value">{{ avg_return }}</div>
            <div class="stat-label">å¹³å‡æ”¶ç›Šç‡</div>
        </div>
        <div class="stat-item">
            <div class="stat-value">{{ cumulative_return }}</div>
            <div class="stat-label">ç´¯è®¡æ”¶ç›Šç‡</div>
        </div>
    </div>
</div>

<div class="card">
    <h2>ğŸ“Š ç»©æ•ˆæŒ‡æ ‡</h2>
    <table>
        <tr>
            <td>å›æµ‹åŒºé—´</td>
            <td>{{ start_date }} ~ {{ end_date }}</td>
        </tr>
        <tr>
            <td>æ€»äº¤æ˜“æ¬¡æ•°</td>
            <td>{{ total_trades }}</td>
        </tr>
        <tr>
            <td>èƒœç‡</td>
            <td>{{ win_rate }}</td>
        </tr>
        <tr>
            <td>å¹³å‡æ”¶ç›Šç‡</td>
            <td>{{ avg_return }}</td>
        </tr>
        <tr>
            <td>æœ€å¤§å•ç¬”ç›ˆåˆ©</td>
            <td class="positive">{{ max_profit }}</td>
        </tr>
        <tr>
            <td>æœ€å¤§å•ç¬”äºæŸ</td>
            <td class="negative">{{ max_loss }}</td>
        </tr>
        <tr>
            <td>ç›ˆäºæ¯”</td>
            <td>{{ profit_loss_ratio }}</td>
        </tr>
        <tr>
            <td>ç´¯è®¡æ”¶ç›Šç‡</td>
            <td class="{% if cumulative_return.startswith('-') %}negative{% else %}positive{% endif %}">{{ cumulative_return }}</td>
        </tr>
    </table>
</div>

{% if trades %}
<div class="card">
    <h2>ğŸ“‹ äº¤æ˜“æ˜ç»†</h2>
    <div style="overflow-x: auto;">
        <table>
            <thead>
                <tr>
                    <th>ä»£ç </th>
                    <th>åç§°</th>
                    <th>ä¹°å…¥æ—¥æœŸ</th>
                    <th>ä¹°å…¥ä»·</th>
                    <th>å–å‡ºæ—¥æœŸ</th>
                    <th>å–å‡ºä»·</th>
                    <th>å–å‡ºåŸå› </th>
                    <th>æ”¶ç›Šç‡</th>
                    <th>æŒæœ‰å¤©æ•°</th>
                </tr>
            </thead>
            <tbody>
                {% for trade in trades %}
                <tr>
                    <td>{{ trade.code }}</td>
                    <td>{{ trade.name }}</td>
                    <td>{{ trade.buy_date }}</td>
                    <td>{{ trade.buy_price }}</td>
                    <td>{{ trade.sell_date }}</td>
                    <td>{{ trade.sell_price }}</td>
                    <td>{{ trade.sell_reason }}</td>
                    <td class="{{ trade.return_class }}">{{ trade.return_pct }}</td>
                    <td>{{ trade.holding_days }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% else %}
<div class="card">
    <div class="empty-state">
        <h3>æš‚æ— äº¤æ˜“è®°å½•</h3>
        <p>å›æµ‹æœŸé—´æœªäº§ç”Ÿç¬¦åˆæ¡ä»¶çš„äº¤æ˜“ä¿¡å·</p>
    </div>
</div>
{% endif %}
{% endblock %}
